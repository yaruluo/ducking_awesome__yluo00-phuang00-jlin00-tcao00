{% extends "base.html" %}

{% block title %}
	Daily
{% endblock %}

{% block body %}
<div style = "display: block; margin-left: auto; margin-right: auto;">
	<h2> {{ date }} </h2><br>
	<h3 style = "color: orange;"> Daily Overview </h3>
	<div class="card" style = "width: 800px; text-align: left;" id = "journal" data-hidden = "{{ hide }}">
		<div class="form-group" id = "add" style = "display: inline;">
			<button type="button" class="btn btn-primary btn-rounded btn-xs" style = "width: 40px; border-radius: 30px;">+</button>
			Add a new entry!
		</div>
		<form action = "/entrycheck" method = "POST" class="form-group" id = "textform" style = "display: none;">
	    <textarea class="form-control" rows="4" name = "new_entry" placeholder = "Today, I am..."></textarea><br>
			<button type="submit" class="btn btn-primary" id="submit">Submit</button>
		</form>
		{% if entries != None %}
		{% for x in entries %}
			<div class = "card" style = "padding-left: 10px; padding-right: 10px; text-align: left; background-color: #e8f4f8;">
				{% autoescape false %}
					{{ x | replace("\r\n", "<br>") }}
				{% endautoescape %}
				<div class="form-group" id = "edit">
					<br>
					<button type="button" class="btn btn-primary btn-rounded btn-xs" id = "editbutton">Edit</button>
				</div>
				<form action = "/editentry" method = "POST" class="form-group" id = "textedit" style = "display: none;">
			    <textarea class="form-control" rows="5" name = "edit_entry">{{ x }}</textarea><br>
					<button type="submit" class="btn btn-primary">Submit</button>
				</form>
			</div>
		{% endfor %}
		{% endif %}
	</div>
</div>
<br>
<h3 style = "color: orange;"> Current Mood </h3>
<div class = "card" style="width:800px;background-color:{{mood[1]}};">
	<div class="card-body">
		<p style="text-align:center">{{mood[0]}}</p>
		{% if isOwner %}
		<div style="text-align:left;">
			<button type="button" id="updateMood" class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">Update</button>
			<div class="collapse" id="collapseExample">
				<br>
				<form class="form-inline" action='/moodcheck' method="POST">
					<span>
						<select class="form-control form-control-sm" id="mood" name="mood" style="width:18rem">
							<option style="background-color: #ffb6e6" class="pink" value="0">happy/joyful/content/relax</option>
							<option style="background-color: #a3dbff" class="blue" value="1">sad/lonely/depressed/insecure</option>
							<option style="background-color: #71ffda" class="green" value="2">productive/motivated/alive/excited</option>
							<option style="background-color: #feffb2" class="yellow" value="3">sick/tired/bored/lazy</option>
							<option style="background-color: #ffd177" class="orange" value="4">average/normal/fine/OK</option>
							<option style="background-color: #ff5b5b" class="red" value="5">angry/anxious/fustrated/annoyed</option>
						</select>
						<input type="hidden" name="date" value="{{datetime}}">
						<button type="submit" class="btn btn-sm btn-secondary">Submit</button>
					</span>
				</form>
			</div>
		</div>
		{% endif %}
	</div>
</div>
<br>


{% endblock body %}

{% block script %}
<script>

	var test = document.getElementById("journal").getAttribute("data-hidden");
	var add = document.getElementById("add");
	console.log(test);

	if(test == "yes"){
		add.style.display = "none";
	}
	if(test == "no"){
		add.style.display = "inline";
	}

	var textform = document.getElementById("textform");

	add.onclick = function(){
		if(textform.style.display == "none"){
			textform.style.display = "inline";
		}else{
			textform.style.display = "none";
		}
	}

	var edit = document.getElementById("editbutton");
	var textedit = document.getElementById("textedit");

	edit.onclick = function(){
		console.log("here")
		if(textedit.style.display == "none"){
			textedit.style.display = "inline";
		}else{
			textedit.style.display = "none";
		}
	}

</script>
{% endblock %}
