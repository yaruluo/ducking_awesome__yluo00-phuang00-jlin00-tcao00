{% extends "base.html" %}

{% block title %}
	Friends
{% endblock %}

{% block body %}
<h1>Friends</h1>
<div class="container">
	<div class="row">
		<div class="col col-lg-6">
			<h4>Friend List</h4>
			{% if friendlist != [] %}
			<table class="table table-striped table-hover p-3">
				<thead class="thead-dark">
					<tr>
						<th>Username</th>
						<th>User ID</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for friend in friendlist %}
					<tr class="text-center">
						<td>{{ friend[0] }}</td>
						<td>{{ friend[1] }}</td>
						<td>
							<a href="/daily/{{ friend[1] }}/{{ date }}" class="p-0">View Daily</a><br>
							<a href="#" class="p-0">View Monthly</a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			{% else %}
			<div class="card">
			  <div class="card-body">
			    <p class="card-text">None</p>
			  </div>
			</div>
			{% endif %}
		</div>
		<div class="col col-lg-6">
			<h4>Pending Requests</h4>
			{% if requests != [] %}
			<table class="table table-striped table-hover p-3">
				<thead class="thead-dark">
					<tr>
						<th>Username</th>
						<th>User ID</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for request in requests %}
					<tr class="text-center">
						<td class="align-middle">{{ request[0] }}</td>
						<td class="align-middle">{{ request[1] }}</td>
						<td>
							<form action="/processrequest" method="POST">
								<input type="hidden" name="id" value="{{ request[1] }}">
								<input type="hidden" name="response" value="1">
								<button class="btn btn-link text-success p-0" type="submit">Accept</button>
							</form>
							<form action="/processrequest" method="POST">
								<input type="hidden" name="id" value="{{ request[1] }}">
								<input type="hidden" name="response" value="0">
								<button class="btn btn-link text-danger p-0" type="submit">Delete</button>
							</form>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			{% else %}
			<div class="card">
			  <div class="card-body">
			    <p class="card-text">None</p>
			  </div>
			</div>
			{% endif %}
		</div>
	</div>
</div>
<br>
<div class="card w-25">
	<div class="card-body">
		<h4 class="card-title">Permissions</h4>
		{% if edit %}
		<form action="/editpermissions" method="POST">
			{% for key, value in permissions %}
			<div class="form-check">
				{% if value[0] == True %}
				<input name="options" type="checkbox" class="form-check-input" id="{{ key }}" value="{{ key }}" checked>
				{% else %}
				<input name="options" type="checkbox" class="form-check-input" id="{{ key }}" value="{{ key }}">
				{% endif %}
				<label class="form-check-label" for="{{ key }}">{{ value[1] }}</label>
			</div>
			{% endfor %}
			<button type="submit" class="btn btn-primary" style = "margin-top: 6px;">Submit</button>
		</form>
		{% else %}
		<div>
			{% for key, value in permissions %}
			{{ value[1] }}:
			{% if value[0] %}
			<span class="text-success">{{ value[0] }}</span>
			{% else %}
			<span class="text-danger">{{ value[0] }}</span>
			{% endif %}
			<br>
			{% endfor %}
			<a class="btn btn-primary text-white" href="/permissions" style = "margin-top: 6px;">Edit</a>
		</div>
		{% endif %}
	</div>
</div>
{% endblock body %}
