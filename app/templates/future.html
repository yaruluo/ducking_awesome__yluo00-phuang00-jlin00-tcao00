{% extends "base.html" %}

{% block title %}
	Future
{% endblock %}

{% block body %}
<h2>Lists</h2>
{% if isOwner %}
<p>
  <button class="btn btn-info" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    Add new list
  </button>
</p>
<div class="collapse" id="collapseExample">
  <div class="card card-body w-25" style="background-color:#e8f4f8">
    <form action="/addnewlist" method="POST">
      <input type="hidden" name="user" value="{{ default_id }}">
      <input type="text" name="title" placeholder="Title" class="form-control" required>
      {% if friendlist|length != 0 %}
      <br><span class="font-weight-bold">Add collaborators: </span> <br>
      <div class="form-check">
      {% for friend in friendlist %}
          <input type="checkbox" class="form-check-input" id="{{ friend[1] }}" value="{{ friend[1] }}" name="options">
          <label class="form-check-label" for="{{ friend[1] }}">{{ friend[0] }}</label><br>
      {% endfor %}
      </div>
      {% endif %}
      <br>
      <button class="btn btn-primary btn-sm" type="submit">Submit</button>
      <br>
    </form>
  </div>
</div>
{% endif %}
<br>
{% for i in range(length) %}
<div class="row w-75">
  <div class="col-4">
    <div class="card"><br>
      <h3 class="card-title my-0">{{ lists[i * 3][1] }}</h3>
      By {{ lists[i * 3][3][1] }}<br>
      {% if lists[i * 3][5] == 3 %}
        <i>Collaborators:
          {% for person in lists[i * 3][4] %}
          {{ person[1] }},
          {% endfor %}
        </i>
      {% endif %}
      {% if lists[i * 3][2]|length == 0 %}
      <p class="my-2">
        <i style="color:#aaa" class="text-center">None</i>
      </p>
      {% else %}
      <br>
          {% for item in lists[i * 3][2] %}
            {{ item[0] }}<br>
          {% endfor %}
					<br>
      {% endif %}
      {% if default_id == lists[i * 3][3][0] %}
        <a href="/editlist/{{ lists[i * 3][0] }}" class="fa fa-pencil"></a><br>
      {% else %}
        {% for person in lists[i * 3][4] %}
          {% if default_id == person %}
          <a href="/editlist/{{ lists[i * 3][0] }}" class="fa fa-pencil"></a><br>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
  {% if (i * 3 + 1) <= lists|length - 1 %}
  <div class="col-4">
    <div class="card"><br>
      <h3 class="card-title my-0">{{ lists[i * 3 + 1][1] }}</h3>
      By {{ lists[i * 3 + 1][3][1] }}<br>
      {% if lists[i * 3 + 1][5] == 3 %}
        <i>Collaborators:
          {% for person in lists[i * 3 + 1][4] %}
          {{ person[1] }},
          {% endfor %}
        </i>
      {% endif %}
      {% if lists[i * 3 + 1][2]|length == 0 %}
      <p class="my-2">
        <i style="color:#aaa" class="text-center">None</i>
      </p>
      {% else %}
      <br>
          {% for item in lists[i * 3 + 1][2] %}
            {{ item[0] }}<br>
          {% endfor %}
					<br>
      {% endif %}
      {% if default_id == lists[i * 3 + 1][3][0] %}
        <a href="/editlist/{{ lists[i * 3 + 1][0] }}" class="fa fa-pencil"></a><br>
      {% else %}
        {% for person in lists[i * 3 + 1][4] %}
          {% if default_id == person %}
          <a href="/editlist/{{ lists[i * 3 + 1][0] }}" class="fa fa-pencil"></a><br>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
  {% endif %}
  {% if (i * 3 + 2) <= lists|length - 1 %}
  <div class="col-4">
    <div class="card"><br>
      <h3 class="card-title my-0">{{ lists[i * 3 + 2][1] }}</h3>
      By {{ lists[i * 3 + 2][3][1] }}<br>
      {% if lists[i * 3 + 2][5] == 3 %}
        <i>Collaborators:
          {% for person in lists[i * 3 + 2][4] %}
          {{ person[1][1] }},
          {% endfor %}
        </i>
      {% endif %}
      {% if lists[i * 3 + 2][2]|length == 0 %}
      <p class="my-2">
        <i style="color:#aaa" class="text-center">None</i>
      </p>
      {% else %}
      <br>
          {% for item in lists[i * 3 + 2][2] %}
            {{ item[0] }}<br>
          {% endfor %}
					<br>
      {% endif %}
      {% if default_id == lists[i * 3 + 2][3][0] %}
        <a href="/editlist/{{ lists[i * 3 + 2][0] }}" class="fa fa-pencil"></a><br>
      {% else %}
        {% for person in lists[i * 3 + 2][4] %}
          {% if default_id == person %}
          <a href="/editlist/{{ lists[i * 3 + 2][0] }}" class="fa fa-pencil"></a><br>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
  {% endif %}
</div>
<br>
{% endfor %}
{% endblock %}
